@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="Root__main-view">
    <div class="main-view-container">
        <div style="margin-top: 60px;"></div>
        <div class="form-container">
            <div class="os-content" style="padding: 0; width: 100%;">
                <div class="contentSpacing">
                    <section class="playlist-creation">
                        <h1 class="playlist-title">
                            Hãy đặt tên cho danh sách phát của bạn
                        </h1>  
                        <p class="messagesuccess">@TempData["success"]</p>
                                  
                        <form action="/Home/ThemPL" method="post" class="playlist-form">
                            <input type="text" name="tenPL" placeholder="Nhập tên danh sách của bạn" required class="playlist-input" />
                            <button type="submit" class="playlist-button">Thêm</button>

                            <!-- Hidden inputs for selected songs -->
                            <input type="hidden" name="selectedSongsList" id="selectedSongsList" />
                        </form>
                    </section>
                    <div class="card">
                        <div class="card-body">
                            <table class="table playlist-table">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th>Tên Bài Hát</th>
                                        <th>Ảnh</th>
                                        <th>Ca Sĩ</th>
                                        <th>Ngày Phát Hành</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in ViewBag.baihats)
                                    {
                                        <tr>
                                            <td><input type="checkbox" name="selectedSongs" value="@item.MaBH" /></td>
                                            <td>@item.TenBH</td>
                                            <td><img src="/image/@item.image" width="50" height="50" class="song-img" /></td>
                                            <td>@item.CaSi.TenCS</td>
                                            <td>@item.NgayPH.ToString("dd/MM/yyyy")</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Spotify-like theme styling */
    .main-view-container {
        background-color: #121212;
        color: #ffffff;
        padding: 20px;
        border-radius: 8px;
    }

    .playlist-title {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 10px;
        color: #1DB954; /* Spotify green */
    }

    .playlist-form {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 20px;
    }

    .playlist-input {
        padding: 10px;
        font-size: 16px;
        border-radius: 5px;
        border: none;
        width: 300px;
    }

    .playlist-button {
        background-color: #1DB954;
        color: #fff;
        border: none;
        border-radius: 25px;
        padding: 8px 20px;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.3s ease;
    }

        .playlist-button:hover {
            background-color: #1ed760;
        }

    .card {
        background-color: #181818;
        border: none;
        border-radius: 8px;
        padding: 15px;
    }

    .playlist-table {
        width: 100%;
        border-collapse: collapse;
    }

        .playlist-table th, .playlist-table td {
            padding: 12px 10px;
            text-align: left;
            border-bottom: 1px solid #333;
        }

        .playlist-table th {
            font-weight: bold;
            color: #b3b3b3;
        }

        .playlist-table tr:hover {
            background-color: #333;
        }

    .song-img {
        border-radius: 4px;
    }

    input[type="checkbox"] {
        transform: scale(1.2);
    }


    .messagesuccess {
      
        color: white;
    }

    

</style>

<script>
    // Function to collect selected songs' IDs and store them in a hidden input field
    document.querySelector(".playlist-form").addEventListener("submit", function (event) {
        let selectedSongs = [];

        // Collect all checked checkboxes
        document.querySelectorAll('input[name="selectedSongs"]:checked').forEach(function (checkbox) {
            selectedSongs.push(checkbox.value); // Push the song ID to the array
        });

        // Set the value of the hidden input field with selected song IDs
        document.getElementById("selectedSongsList").value = selectedSongs.join(","); // Join them with commas
    });
</script>
